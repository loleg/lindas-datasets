<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/build/css/admin.css">
    <link rel="stylesheet" href="/build/css/print.css">
    <link rel="stylesheet" href="/build/css/vendors.css">
        <link rel="stylesheet" href="/build/css/lindasPage.css">

        <!-- Requirements for embedded CKAN widget -->
        <script src="embed-js/jquery-2.1.4.min.js"></script>
        <script src="embed-js/underscore-min.js"></script>
        <script src="embed-js/ckan.js"></script>

    <title>Opendata.swiss Embedded</title>
    <!--
    <script src="bower_components/webcomponentsjs/webcomponents.js"></script>
    <script src="//cdn.rawgit.com/rdf2h/rdf2h/v0.3.0/dist/rdf-ext.js"></script>
    <script src="//cdn.rawgit.com/rdf2h/rdf2h/v0.3.0/dist/rdf2h.js"></script>
    <script src="//cdn.rawgit.com/retog/rdf-parser-n3-browser/v0.3.0b/dist/n3-parser.js"></script>
    <script src="//cdn.rawgit.com/retog/rdf-store-ldp-browser/v0.3.0-rc2f/dist/rdf-store-ldp.js"></script>
    <script src="//code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="//cdn.rawgit.com/rdf2h/ld2h/v0.4.1/dist/ld2h.js"></script>
    <link rel="import" href="bower_components/moment-js/moment-js.html">
  -->
</head>

<body class="mod mod-layout skin-layout-template-homepage" data-glossary="/gov/de/start.glossaryjs.json" style="">

<div class="container container-main">
    <!--header-->
    <header ng-style="testServerStyle">
        <div flash-alert="" active-class="in alert" class="fade ng-scope" duration="10000">
            <button type="button" class="close" ng-click="hide()">×</button>
            <span class="alert-message ng-binding"></span>
        </div>
        <div class="clearfix ng-scope" ng-controller="NavbarCtrl">
            <section class="nav-services clearfix">
                <h2 data-i18n="_home-title_">Linked Data Suite</h2>
                <nav class="nav-lang">
                    <ul>
                        <!-- ngRepeat: lang in languages -->
                   <li ng-repeat="lang in languages" class="ng-scope">
                            <a href="index.html" class="active" ng-click="setLanguage(lang);" class="ng-binding active">DE</a>
                        </li>
                        <!-- end ngRepeat: lang in languages -->
                        <li ng-repeat="lang in languages" class="ng-scope">
                            <a href="indexEN.html" class="" ng-click="setLanguage(lang);" class="ng-binding">EN</a>
                        </li>
                        <!-- end ngRepeat: lang in languages -->
                        <li ng-repeat="lang in languages" class="ng-scope">
                            <a href="indexFR.html" class="" ng-click="setLanguage(lang);" class="ng-binding">FR</a>
                        </li>
                        <!-- end ngRepeat: lang in languages -->
                    </ul>
                </nav>
                <nav class="pull-right">
                    <!-- ngIf: isUserAuthenticated() && $root.isSystemSetUp -->
                    <!-- ngIf: !isUserAuthenticated() && $root.isSystemSetUp -->
                    <ul class="download-link ng-scope" ng-if="!isUserAuthenticated() &amp;&amp; $root.isSystemSetUp">
                        <li><a href="http://lindas-data.ch" class="ng-binding">Anmelden</a></li>
                    </ul>
                    <!-- end ngIf: !isUserAuthenticated() && $root.isSystemSetUp -->
                </nav>
            </section>
        </div>

        <a href="#/" class="brand hidden-xs">
            <img src="/build/img/logo-CH.png">
            <h1 data-i18n="_home-title_">Linked Data Suite</h1>
        </a>


    </header>
    <!--navigation-->
    <nav class="nav-main yamm navbar ng-scope" role="navigation" ng-controller="NavbarCtrl">
        <ul class="nav navbar-nav">
            <li class="dropdown yamm-fw" ng-class="getClass('/start')"><a href="#/start" class="ng-binding">Willkommen bei LINDAS</a></li>
            <li class="dropdown yamm-fw" ng-class="getClass('/browse')"><a href="/datasets.html" class="ng-binding">Inhaltsverzeichnis</a></li>
            <li class="dropdown yamm-fw active" ng-class="getClass('/embed')"><a href="/embed.html" class="ng-binding">Opendata.swiss</a></li>
        </ul>
    </nav>
    <div class="col-md-12" style="margin:13px">
        <div class="col-md-9 main-content container-fluid">
            <!-- appViewSegment: 0 -->
            <div id="contents" app-view-segment="0" class="ng-scope">
                <div class="contents row ng-scope">
                    <h3 data-i18n="_start_">Options for embedding datasets from Opendata.swiss</h3>

                    <p>This working document analyses the Web publishing capabilities of CKAN portals, in order to present and discuss options for sharing rich content on third-party sites. This material will afterwards be published at <a href="https://handbook.opendata.swiss">https://handbook.opendata.swiss</a>.</p>

                    <div class="opendataswiss-embed">

                      <p class="embed-nav">
                        <a class="btn btn-lg btn-default" href="embed.html">&lt;&lt;<br> Overview</a> &nbsp;
                        <a class="btn btn-lg btn-default" href="embed-iframe.html">Option 1<br>
                          <small>Frames</small></a> &nbsp;
                        <a class="btn btn-lg btn-default" href="embed-opengraph.html">Option 2<br>
                          <small>OpenGraph</small></a> &nbsp;
                        <a class="btn btn-lg btn-default active" href="embed-widget.html">Option 3<br>
                          <small>Widget</small></a> &nbsp;
                      </p>
                      <style>.embed-nav .btn { text-decoration: none; }</style>

                      <p>Example of rendering a search from CKAN using the API in a JavaScript widget:</p>
                      <div id="embed-container"></div>
<script>
// For information on the CKAN Client see https://github.com/okfn/ckan.js
// We used NGINX to proxy requests https://www.nginx.com/resources/admin-guide/reverse-proxy/
var client = new CKAN.Client('http://opendataswiss-lindas-test.datalets.ch');
// For details of API usage see http://docs.ckan.org/en/latest/api/
var data = { q: 'RDF', sort: 'metadata_modified desc' };
client.action('package_search', data, function(err, result) {
  if (err != null) { console.log(err); return; }
  console.log(result);
  var datasets = result.result.results;

  // Underscore template for the output of the widget
  var template = _.template(
    '<div class="embed-dataset">' +
      '<a href="https://opendata.swiss/en/dataset/<%= ds.name %>">' +
        '<h5><%= ds.title %></h5>' +
      '</a>' +
      '<p><%= ds.description %></p>' +
      '<b><%= ds.groupname %></b><br>' +
      '<small><%= ds.formats %></small>' +
      //'<small><%= ds.modified %></small>' +
    '</div>'
  );

  // Helper functions to massage the results
  var fragments = [];
  var getLangDefault = function(n) {
    return n.fr || n.de || n.it || n.en;
  };
  var getDatasetFormats = function(res) {
    return _.uniq(_.map(res,
        function(r) { return r.format }))
          .join(' ');
  }

  // Pass the dataset results to the template
  for (var i in datasets) {
    var dso = datasets[i];
    var ds = {
      name:          dso.name,
      title:         getLangDefault(dso.display_name),
      groupname:     (dso.groups.length == 0) ? '' :
                      getLangDefault(dso.groups[0].display_name),
      description:   getLangDefault(dso.description),
      formats:       getDatasetFormats(dso.resources),
      modified:      dso.metadata_modified
    };
    fragments.push(template({ ds: ds }));
  }

  // Insert into the container on the page
  $('#embed-container').html(fragments.join(''));
});
</script>
<style>
/* A bit of formatting for the embedded results */
.embed-dataset {
  border-bottom: 1px solid black;
  padding: 10px 0px;
}
.embed-dataset h5 {
  font-weight: bold;
  font-size: 150%;
  color: #009688;
}
</style>
                      <!-- <p>Example of a Twitter widget using embedded JavaScript:</p>
                      <blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Hate crime on the rise. We created an <a href="https://twitter.com/hashtag/opendata?src=hash">#opendata</a> workspace w <a href="https://twitter.com/ADL_National">@ADL_National</a> to analyze this dark trend. Will you help? <a href="https://t.co/Uyyp3sE1ij">https://t.co/Uyyp3sE1ij</a> <a href="https://t.co/cpLnxRDBVk">pic.twitter.com/cpLnxRDBVk</a></p>&mdash; datadotworld (@datadotworld) <a href="https://twitter.com/datadotworld/status/799365181742743552">November 17, 2016</a></blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script> -->

                    </div>

                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="context-column">

                <a name="context-sidebar"></a>
                <div class="mod mod-contactbox"></div>
                <div class="mod mod-teaser">
                    <div class="clearfix well ">
                        <img src="build/img/lindas/logo-Lindas.png" style="margin: 0 auto; display: block; margin-top: 20px;">

                        <h3 class="link_title">Weiterführende Links</h3>
                        <ul>
                            <li><a href="https://www.egovernment.ch/" target="_blank" class="icon icon--after icon--external">egovernment schweiz</a></li>
                            <li><a href="http://data.admin.ch" target="_blank" class="icon icon--after icon--external">data.admin.ch</a></li>
                        </ul>

                    </div>
                </div>
            </div>
        </div>
            </div>

        <div style="clear:both"></div>
        <footer>
            <address>
			<div class="container-fluid ng-binding">
			©2014-2016 Staatssekretariat für Wirtschaft SECO
			<nav class="pull-right">
                <ul ng-controller="NavbarCtrl" class="ng-scope">
                    <li>
	          <!-- ngIf: getSystemLanguage()=='de' --><a ng-if="getSystemLanguage()=='de'" href="http://www.disclaimer.admin.ch/index.html" target="_blank" data-i18n="_legal-information_" class="ng-scope">Rechtliches</a><!-- end ngIf: getSystemLanguage()=='de' -->
	          <!-- ngIf: getSystemLanguage()=='fr' -->
	          <!-- ngIf: getSystemLanguage()=='it' -->
	          <!-- ngIf: getSystemLanguage()=='en' -->
                    </li>
                    <li ng-class="getClass('/legal-information')"></li>
          <li ng-class="getClass('/legal-information')"></li>
          <li ng-class="getClass('/legal-information')"></li>
          <li ng-class="getClass('/contact')"><a href="/contact.html" data-i18n="_contact_">Kontakt</a></li>
                </ul>
            </nav>
			</div>
		</address>
</footer>

</div>

</body>

</html>
